マイクの選択をなるべく記憶するようにしよう。
マイクの一覧(順番関係なし)のことを環境と呼ぶことにする。
まず、環境ごとに明示的に選ばれたマイク最新の情報を覚えておく。
それとは別に、直近何件かの、明示的に選ばれたマイクの一覧を覚えておく。
現在の環境に合致する選ばれたマイク情報があればそれを自動選択。
それがなければ、直近のやつのうち、最新のほうからチェックして最初に存在するものを自動選択。
それらもなければ、現在と同じデフォルトを自動選択、という順番にしよう。
関数として丁寧に分離して、vitestを利用したテストも実装しよう。package.json、CIなども追従して。
ultrathink
